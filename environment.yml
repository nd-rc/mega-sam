name: mega_sam
channels:
  - defaults
dependencies:
  - python=3.10
  - pip
  - pip:
    # 1. Указываем, где искать драйверы для RTX 5070 (Nightly сборка)
    - --index-url https://download.pytorch.org/whl/nightly/cu128
    - --extra-index-url https://pypi.org/simple
    
    # 2. Ставим свежий PyTorch (pre-release)
    - --pre torch
    - --pre torchvision
    - --pre torchaudio
    
    # 3. Остальные библиотеки (берутся из обычного интернета)
    - opencv-python-headless
    - tqdm
    - imageio
    - imageio-ffmpeg
    - einops
    - scipy
    - matplotlib
    - wandb
    - timm
    - huggingface-hub
    - ninja
    - numpy<2.0 # Фиксируем версию, чтобы не сломать совместимость
    
    # ВРЕМЕННО ОТКЛЮЧЕНО:
    # - xformers 
    # (UniDepth не будет работать, пока xformers не обновят под CUDA 12.8)
    # (torch-scatter тоже часто ломается на Nightly, лучше пока без него)